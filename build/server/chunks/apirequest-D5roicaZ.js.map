{"version":3,"file":"apirequest-D5roicaZ.js","sources":["../../../.svelte-kit/adapter-node/chunks/apirequest.js"],"sourcesContent":["import { readFile } from \"fs/promises\";\nasync function CheckPullRequest(LastPullLog, FilePath, timelimit) {\n  let lastpull = \"\";\n  let datediff = 0;\n  let fileExists = false;\n  let offlinedata = null;\n  try {\n    lastpull = await readFile(LastPullLog, \"utf8\");\n  } catch {\n    lastpull = \"\";\n  }\n  const datenow = /* @__PURE__ */ new Date();\n  const datenowMs = datenow.getTime();\n  const lastpullMs = lastpull ? Date.parse(lastpull) : 0;\n  datediff = datenowMs - lastpullMs;\n  try {\n    offlinedata = await readFile(FilePath, \"utf8\");\n    fileExists = true;\n  } catch {\n    offlinedata = null;\n    fileExists = false;\n  }\n  if (!fileExists) {\n    datediff = timelimit + 1;\n  }\n  return { lastpull, datediff, fileExists, offlinedata };\n}\nconst pluginKey = \"Q2WcOGJPaJKM4E044tqxE1G09L4V2KfI0rmVLmPoY5TgaXqn4QDIiAhaWDbHxSf1\";\nconst apiKeyTest = \"e81cbf18a5239377aa4972773d34cc2b81ebc672879581bce29a0a4c414bf117\";\nconst urlImprint = \"https://api.e-recht24.de/v2/imprint\";\nconst urlPrivacy = \"https://api.e-recht24.de/v2/privacyPolicy\";\nasync function fetchERecht24Api(apiUrl) {\n  const key = apiKeyTest;\n  let errorMessage;\n  try {\n    const response = await fetch(apiUrl, {\n      headers: {\n        \"eRecht24-api-key\": key,\n        \"eRecht24-plugin-key\": pluginKey,\n        accept: \"application/json\"\n      },\n      method: \"GET\"\n    });\n    if (response.ok) {\n      const apidata = await response.json();\n      return { apidata };\n    } else {\n      console.log(response.status);\n      throw new Error(`${response.status}`);\n    }\n  } catch (error) {\n    if (error == \"Error: 400\") {\n      errorMessage = \"No clients found for api-key.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 401\") {\n      errorMessage = \"Invalid API key and/or Plugin key for the eRecht24 API v2.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 403\") {\n      errorMessage = \"A maximum of 3 clients may be created per project.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 404\") {\n      errorMessage = \"Client could not be loaded / updated / deleted.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 409\") {\n      errorMessage = \"A client with the URL already exists.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 422\") {\n      errorMessage = \"Invalid params specified.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 496\") {\n      errorMessage = \"Push request not successfully executed due to errors in requests to clients.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 497\") {\n      errorMessage = \"Test push was not successful, client did non respond with code 200.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 498\") {\n      errorMessage = \"Ping was not successful.\";\n      return { error: errorMessage };\n    }\n    if (error == \"Error: 503\") {\n      errorMessage = \"A connection to the eRecht24 API database could not be established.\";\n      return { error: errorMessage };\n    }\n    errorMessage = \"Unknown error, see dokumentation https://api-docs.e-recht24.de/. Errorcode: \" + error;\n    return { error: errorMessage };\n  }\n}\nexport {\n  CheckPullRequest as C,\n  urlPrivacy as a,\n  fetchERecht24Api as f,\n  urlImprint as u\n};\n"],"names":[],"mappings":";;AACA,eAAe,gBAAgB,CAAC,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE;AAClE,EAAE,IAAI,QAAQ,GAAG,EAAE;AACnB,EAAE,IAAI,QAAQ,GAAG,CAAC;AAClB,EAAE,IAAI,UAAU,GAAG,KAAK;AACxB,EAAE,IAAI,WAAW,GAAG,IAAI;AACxB,EAAE,IAAI;AACN,IAAI,QAAQ,GAAG,MAAM,QAAQ,CAAC,WAAW,EAAE,MAAM,CAAC;AAClD,GAAG,CAAC,MAAM;AACV,IAAI,QAAQ,GAAG,EAAE;AACjB;AACA,EAAE,MAAM,OAAO,mBAAmB,IAAI,IAAI,EAAE;AAC5C,EAAE,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,EAAE;AACrC,EAAE,MAAM,UAAU,GAAG,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC;AACxD,EAAE,QAAQ,GAAG,SAAS,GAAG,UAAU;AACnC,EAAE,IAAI;AACN,IAAI,WAAW,GAAG,MAAM,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC;AAClD,IAAI,UAAU,GAAG,IAAI;AACrB,GAAG,CAAC,MAAM;AACV,IAAI,WAAW,GAAG,IAAI;AACtB,IAAI,UAAU,GAAG,KAAK;AACtB;AACA,EAAE,IAAI,CAAC,UAAU,EAAE;AACnB,IAAI,QAAQ,GAAG,SAAS,GAAG,CAAC;AAC5B;AACA,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,WAAW,EAAE;AACxD;AACA,MAAM,SAAS,GAAG,kEAAkE;AACpF,MAAM,UAAU,GAAG,kEAAkE;AAChF,MAAC,UAAU,GAAG;AACd,MAAC,UAAU,GAAG;AACnB,eAAe,gBAAgB,CAAC,MAAM,EAAE;AACxC,EAAE,MAAM,GAAG,GAAG,UAAU;AACxB,EAAE,IAAI,YAAY;AAClB,EAAE,IAAI;AACN,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,MAAM,EAAE;AACzC,MAAM,OAAO,EAAE;AACf,QAAQ,kBAAkB,EAAE,GAAG;AAC/B,QAAQ,qBAAqB,EAAE,SAAS;AACxC,QAAQ,MAAM,EAAE;AAChB,OAAO;AACP,MAAM,MAAM,EAAE;AACd,KAAK,CAAC;AACN,IAAI,IAAI,QAAQ,CAAC,EAAE,EAAE;AACrB,MAAM,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AAC3C,MAAM,OAAO,EAAE,OAAO,EAAE;AACxB,KAAK,MAAM;AACX,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC;AAClC,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;AAC3C;AACA,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,+BAA+B;AACpD,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,4DAA4D;AACjF,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,oDAAoD;AACzE,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,iDAAiD;AACtE,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,uCAAuC;AAC5D,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,2BAA2B;AAChD,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,8EAA8E;AACnG,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,qEAAqE;AAC1F,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,0BAA0B;AAC/C,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,IAAI,KAAK,IAAI,YAAY,EAAE;AAC/B,MAAM,YAAY,GAAG,qEAAqE;AAC1F,MAAM,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AACpC;AACA,IAAI,YAAY,GAAG,8EAA8E,GAAG,KAAK;AACzG,IAAI,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE;AAClC;AACA;;;;"}