import{t as S,a3 as A,a4 as L,a5 as x,a6 as b,a7 as g,a8 as B,c as D,a9 as w,aa as F,ab as d,ac as N,T as k,ad as y,h as _,d as R,ae as O,af as W,U as q,b as C,ag as H,ah as P,ai as j,aj as I,s as U,W as m}from"./CaePOEcs.js";const K=new Set,Q=new Set;function Y(a,e,i,s={}){function r(t){if(s.capture||z.call(e,t),!t.cancelBubble)return L(()=>i?.call(this,t))}return a.startsWith("pointer")||a.startsWith("touch")||a==="wheel"?A(()=>{e.addEventListener(a,r,s)}):e.addEventListener(a,r,s),r}function V(a,e,i,s,r){var t={capture:s,passive:r},c=Y(a,e,i,t);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&S(()=>{e.removeEventListener(a,c,t)})}let T=null;function z(a){var e=this,i=e.ownerDocument,s=a.type,r=a.composedPath?.()||[],t=r[0]||a.target;T=a;var c=0,n=T===a&&a.__root;if(n){var f=r.indexOf(n);if(f!==-1&&(e===document||e===window)){a.__root=e;return}var o=r.indexOf(e);if(o===-1)return;f<=o&&(c=f)}if(t=r[c]||a.target,t!==e){x(a,"currentTarget",{configurable:!0,get(){return t||i}});var E=B,M=D;b(null),g(null);try{for(var h,p=[];t!==null;){var u=t.assignedSlot||t.parentNode||t.host||null;try{var v=t["__"+s];v!=null&&(!t.disabled||a.target===t)&&v.call(t,a)}catch(l){h?p.push(l):h=l}if(a.cancelBubble||u===e||u===null)break;t=u}if(h){for(let l of p)queueMicrotask(()=>{throw l});throw h}}finally{a.__root=e,delete a.currentTarget,b(E),g(M)}}}class G{anchor;#t=new Map;#a=new Map;#e=new Map;#s=new Set;#r=!0;constructor(e,i=!0){this.anchor=e,this.#r=i}#i=()=>{var e=w;if(this.#t.has(e)){var i=this.#t.get(e),s=this.#a.get(i);if(s)F(s),this.#s.delete(i);else{var r=this.#e.get(i);r&&(this.#a.set(i,r.effect),this.#e.delete(i),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),s=r.effect)}for(const[t,c]of this.#t){if(this.#t.delete(t),t===e)break;const n=this.#e.get(c);n&&(d(n.effect),this.#e.delete(c))}for(const[t,c]of this.#a){if(t===i||this.#s.has(t))continue;const n=()=>{if(Array.from(this.#t.values()).includes(t)){var o=document.createDocumentFragment();O(c,o),o.append(k()),this.#e.set(t,{effect:c,fragment:o})}else d(c);this.#s.delete(t),this.#a.delete(t)};this.#r||!s?(this.#s.add(t),N(c,n,!1)):n()}}};#c=e=>{this.#t.delete(e);const i=Array.from(this.#t.values());for(const[s,r]of this.#e)i.includes(s)||(d(r.effect),this.#e.delete(s))};ensure(e,i){var s=w,r=W();if(i&&!this.#a.has(e)&&!this.#e.has(e))if(r){var t=document.createDocumentFragment(),c=k();t.append(c),this.#e.set(e,{effect:y(()=>i(c)),fragment:t})}else this.#a.set(e,y(()=>i(this.anchor)));if(this.#t.set(s,e),r){for(const[n,f]of this.#a)n===e?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[n,f]of this.#e)n===e?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(this.#i),s.ondiscard(this.#c)}else _&&(this.anchor=R),this.#i()}}function X(a,e,i=!1){_&&C();var s=new G(a),r=i?H:0;function t(c,n){if(_){const o=P(a)===j;if(c===o){var f=I();U(f),s.anchor=f,m(!1),s.ensure(c,n),m(!0);return}}s.ensure(c,n)}q(()=>{var c=!1;e((n,f=!0)=>{c=!0,t(f,n)}),c||t(!1,null)},r)}export{G as B,K as a,V as e,z as h,X as i,Q as r};
